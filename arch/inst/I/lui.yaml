# yaml-language-server: $schema=../../../schemas/inst_schema.json

$schema: "inst_schema.json#"
kind: instruction
name: lui
format: { $ref: inst_format/utype.yaml# }
long_name: Load upper immediate
description: Load the zero-extended imm into rd.
definedBy: I
assembly: xd, imm
encoding:
  match: -------------------------0110111
  variables:
  - field: { $ref: inst_format/utype.yaml#/fields/name=imm }
    name: imm
  - field: { $ref: inst_format/utype.yaml#/fields/name=rd }
    name: xd
access:
  s: always
  u: always
  vs: always
  vu: always
data_independent_timing: true
operation(): X[xd] = sext(imm, 32);



sail(): |
  {
    let off : xlenbits = sign_extend(imm @ 0x000);
    let ret : xlenbits = match op {
      RISCV_LUI   => off,
      RISCV_AUIPC => get_arch_pc() + off
    };
    X(rd) = ret;
    RETIRE_SUCCESS
  }




