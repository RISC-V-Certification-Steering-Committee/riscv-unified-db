<<<
[appendix]
== Extension Details
<% proc_cert_model.in_scope_ext_reqs.each do |ext_req| -%>
<% ext = arch.extension(ext_req.name) -%>

[[ext-<%= ext_req.name %>-def]]
=== Extension <%= ext_req.name %> +
<%= ext.nil? ? "" : "*Long Name*: " + ext.long_name + " +" %>

*Version Requirement*: <%= ext_req.requirement_specs.map(&:to_s).join(", ") %> +

<% ext.versions.each do |v| -%>
<%= v.version_spec %>::
  State:::
    <%= v.state %>
  <% if v.state == "ratified" -%>
  Ratification date:::
    <%= v.ratification_date %>
  <% end # if %>
  <% if v.changes.size > 0 -%>
  Changes:::

    <% v.changes.each do |c| -%>
    * <%= c %>
    <% end -%>

  <% end -%>
  <% unless v.url.nil? -%>
  Ratification document:::
    <%= v.url %>
  <% end -%>
  <% if v.implications.size > 0 -%>
  Implies:::
    <% v.implications.each do |i| -%>
    * `<%= i.name %>` version <%= i.version_spec %>
    <% end -%>
  <% end -%>
<% end -%>

==== Synopsis

:leveloffset: +3

<%= ext.description %>

:leveloffset: -3

<% unless ext_req.note.nil? -%>
[NOTE]
--
<%= ext_req.note %>
--
<% end -%>

// TODO: GitHub issue 92: Use version specified by each profile.
<% insts = arch.instructions.select { |i| i.defined_by?(ext.min_version) } -%>
<% unless insts.empty? -%>
==== Instructions

The following instructions are added by this extension:

[cols="1,3"]
|===
<% insts.each do |inst| -%>
| <%= link_to_inst(inst.name) %>
| *<%= inst.long_name %>*
<% end -%>
|===
<% end -%>

<% unless proc_cert_model.in_scope_ext_params(ext_req).empty? -%>
==== IN-SCOPE Parameters

<% proc_cert_model.in_scope_ext_params(ext_req).each do |ext_param| -%>
[[ext-<%= ext_req.name %>-param-<%= ext_param.name %>-def]]
<%= ext_param.name %> &#8658; <%= ext_param.param.schema_type %>::
+
--
<%= ext_param.param.desc %>
--
<% end # do ext_param -%>
<% end # unless table -%>

<% unless proc_cert_model.out_of_scope_params(ext_req.name).empty? -%>
==== OUT-OF-SCOPE Parameters

<% proc_cert_model.out_of_scope_params(ext_req.name).each do |param| -%>
[[ext-<%= ext_req.name %>-param-<%= param.name %>-def]]
<%= param.name %> &#8658; <%= param.schema_type %>::
+
--
<%= param.desc %>
--
<% end # do param -%>
<% end # unless table -%>
<% end # do ext_req -%>
