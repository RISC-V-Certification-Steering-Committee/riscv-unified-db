
#include "udb/cfgs/<%= cfg_arch.name %>/hart.hxx"

void udb::<%= name_of(:hart, cfg_arch) %>::printState(FILE* out) const {
  fmt::print(out, "Hart %u:\n", m_hart_id);
  if constexpr (sizeof(XReg) == 8) {
    fmt::print(out, "PC: {:#18x}\n", m_pc);
    for (int i=0; i<16; i++) {
      fmt::print(out, "x{:2}: {:#18x}\tx{:2}: {:#18x}\n", i, m_xregs[i], i + 16, m_xregs[16 + 1]);
    }
  } else if constexpr (sizeof(XReg) == 4) {
    fmt::print(out, "PC: {:#10x}\n", m_pc);
    for (int i=0; i<16; i++) {
      fmt::print(out, "x{:2}: {:#10x}\tx{:2}: {:#10x}\n", i, m_xregs[i], i + 16, m_xregs[16 + 1]);
    }
  } else {
    assert(!"unsupported xlen");
  }
}
