#pragma once

#include "udb/cfgs/<%= cfg_arch.name %>/csrs.hxx"

namespace udb {
  class <%= name_of(:hart, cfg_arch) %>;

  // just holds the a Hart's Csrs
  struct <%= name_of(:csr_container, cfg_arch) %> {
    <%- cfg_arch.csrs.each do |csr| -%>
    <%= name_of(:csr, cfg_arch, csr.name) %> <%= csr.name %>;
    <%- end -%>

    <%= name_of(:csr_container, cfg_arch) %> (<%= name_of(:hart, cfg_arch) %>* parent) :
    <%- cfg_arch.csrs.map do |csr| -%>
      <%= csr.name %>(parent)
    <%- end -%>.join(",\n    ")
    {}
  };
}
