#pragma once

#include "udb/cfgs/<%= cfg_arch.name %>/csrs.hxx"

<%- csrs = cfg_arch.fully_configured? ? cfg_arch.implemented_csrs : cfg_arch.csrs -%>

namespace udb {
  class <%= name_of(:hart, cfg_arch) %>;

  // just holds the a Hart's Csrs
  struct <%= name_of(:csr_container, cfg_arch) %> {
    <%- csrs.each do |csr| -%>
    <%= name_of(:csr, cfg_arch, csr.name) %> <%= csr.name %>;
    <%- end -%>

    <%= name_of(:csr_container, cfg_arch) %> (<%= name_of(:hart, cfg_arch) %>* parent) :
      <%= csrs.map { |csr| "#{csr.name}(parent)" }.join(",\n      ") -%>
    {}
  };
}
