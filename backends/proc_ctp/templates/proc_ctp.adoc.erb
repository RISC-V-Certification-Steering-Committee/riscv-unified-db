<%= portfolio_design.include_erb("beginning.adoc.erb") %>

= <%= proc_cert_model.name %> Processor Certification Test Plan

[Preface]
== CTP Revision History

<%= proc_cert_design.include_erb("rev_history.adoc.erb") %>

[Preface]
== Typographic Conventions

<%= proc_cert_design.include_erb("typographic.adoc.erb") %>

[Preface]
== Glossary

<%= proc_cert_design.include_erb("glossary.adoc.erb") %>

== Introduction

<%= proc_cert_model.introduction %>

<%= proc_cert_class.introduction %>

Links to ISA manual anchors:

* <<manual:unpriv,The RISC-V Instruction Set Manual Volume I: Unprivileged Architecture>>
* <<manual:priv,The RISC-V Instruction Set Manual Volume II: Privileged Architecture>>
* <<mstandard,M extension chapter>>
* <<zba, zba extension within B extension chapter>>

=== What's a CTP?

Certification Test Plans (CTPs) list certification coverage points and how they will be tested.
CTPs are developed by the RVI CSC (Certification Steering Committee) organization in collaboration
with the RVI TSC (Technical Steering Committee) organization who creates RISC-V standards.

Each certificated offered has a corresponding CRD and CTP. The CRD defines the certification requirements
that an implementation must meet and what behaviors are covered by the certificate. The CTP uses the CRD
to determine the required coverage points.

=== Naming Scheme

==== CTP Naming

<%= proc_cert_design.include_erb("rvcp_naming_scheme.adoc.erb") %>

The specific rules for updating the version number for a CTP are as follows:

* The <major> release number is updated for changes that *could* cause a previously certified
   implementation to now fail. An example is increasing coverage.
* The <minor> release number is updated when the CRD referenced by a CTP adds support for new optional behaviors.
* The <patch> release number is updated for documentation fixes/improvements.
  These changes *cannot* cause a previously certified implementation to no longer pass certification.

==== Processor Naming Scheme

<%= proc_cert_design.include_erb("proc_naming_scheme.adoc.erb") %>

== Instruction Summary

[%autowidth]
|===
| Name | Long Name

<% design.in_scope_instructions.each do |inst| -%>
| <%= link_to_udb_doc_inst(inst.name) %>
| <%= inst.long_name %>
<% end # do -%>
|===

== CSR Summary

[%autowidth]
|===
| Name | Long Name | Address | Mode | Primary Extension

<% design.in_scope_csrs.sort_by!(&:name).each do |csr| -%>
| <%= link_to_udb_doc_csr(csr.name) %>
| <%= csr.long_name %>
| <%= "0x#{csr.address.to_s(16)}" %>
| <%= csr.priv_mode %>
| <%= csr.primary_defined_by %>
<% end # do -%>
|===

// Appendices
<%= portfolio_design.include_erb("ext_appendix.adoc.erb", { "gen_ctp_content" => true }) %>
<%= portfolio_design.include_erb("inst_appendix.adoc.erb", { "gen_ctp_content" => true }) %>
<%= portfolio_design.include_erb("csr_appendix.adoc.erb", { "gen_ctp_content" => true }) %>
<%= portfolio_design.include_erb("idl_func_appendix.adoc.erb") %>

<<<
<% puts "UPDATE: Including riscv-unprivileged.adoc" -%>
// Reset chapter numbering
:!chapter-number:
include::ext/riscv-isa-manual/src/riscv-unprivileged.adoc[]

<<<
<% puts "UPDATE: Including riscv-privileged.adoc" -%>
// Reset chapter numbering
:!chapter-number:
include::ext/riscv-isa-manual/src/riscv-privileged.adoc[]
